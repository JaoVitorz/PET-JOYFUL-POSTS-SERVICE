# PET-JOYFUL-POSTS-SERVICE

MicroserviÃ§o responsÃ¡vel pelo gerenciamento de postagens do Pet Joyful.

## ğŸš€ InstalaÃ§Ã£o
```bash
# Clonar repositÃ³rio
git clone https://github.com/JaoVitorz/PET-JOYFUL-POSTS-SERVICE.git
cd pet-joyful-posts-service

# Instalar dependÃªncias
npm install

# Configurar .env
cp .env.example .env

# Executar
npm run dev
```

## ï¿½ DocumentaÃ§Ã£o Swagger

A documentaÃ§Ã£o interativa estÃ¡ disponÃ­vel em:
```
http://localhost:3003/api-docs
```

### ğŸ”‘ Gerar Token Bearer para o Swagger

Para acessar os endpoints protegidos no Swagger, vocÃª precisa gerar um token JWT.

#### OpÃ§Ã£o 1: Usando o Terminal (Recomendado)

Execute o seguinte comando no terminal:

```bash
node -e "const jwt = require('jsonwebtoken'); const secret = process.env.JWT_SECRET; const token = jwt.sign({userId: '507f1f77bcf86cd799439011', email: 'usuario@test.com', tipo: 'user'}, secret, {expiresIn: '24h'}); console.log('Bearer ' + token);"
```

Copie o token que serÃ¡ exibido no terminal.

#### OpÃ§Ã£o 2: Criar um Script

Crie um arquivo `generate-token.js` na raiz do projeto:

```javascript
const jwt = require('jsonwebtoken');
require('dotenv').config();

const secret = process.env.JWT_SECRET;
const token = jwt.sign(
  {
    userId: '507f1f77bcf86cd799439011',
    email: 'usuario@test.com',
    tipo: 'user'
  },
  secret,
  { expiresIn: '24h' }
);

console.log('âœ… TOKEN GERADO COM SUCESSO:\n');
console.log(token);
console.log('\nğŸ“‹ Use no Swagger: Authorization: Bearer ' + token);
```

Execute com:
```bash
node generate-token.js
```

### ğŸ” Usar o Token no Swagger

1. Abra http://localhost:3003/api-docs
2. Clique no botÃ£o **"Authorize"** (Ã­cone de cadeado)
3. Na janela que abrir, cole o token no formato:
   ```
   Bearer SEU_TOKEN_AQUI
   ```
   (Incluindo a palavra "Bearer ")
4. Clique em **"Authorize"** e depois em **"Close"**
5. Agora vocÃª consegue testar todos os endpoints protegidos âœ…

**â° Validade:** O token expira em 24 horas. Se expirar, gere um novo!

## ï¿½ğŸ“‹ Endpoints

- `POST /api/posts` - Criar postagem (ğŸ”’ Requer autenticaÃ§Ã£o)
- `GET /api/posts` - Listar postagens
- `GET /api/posts/:id` - Buscar postagem
- `PUT /api/posts/:id` - Atualizar postagem (ğŸ”’ Requer autenticaÃ§Ã£o)
- `DELETE /api/posts/:id` - Deletar postagem (ğŸ”’ Requer autenticaÃ§Ã£o)
- `POST /api/posts/:id/like` - Curtir postagem (ğŸ”’ Requer autenticaÃ§Ã£o)
- `POST /api/posts/:id/comment` - Comentar postagem (ğŸ”’ Requer autenticaÃ§Ã£o)

## ğŸ”§ Tecnologias

- Node.js + Express
- MongoDB + Mongoose
- JWT Authentication
- Multer + Cloudinary
- CORS

## ğŸ“ LicenÃ§a

ISC

